# Вариант 5: Ветеринарная клиника

### Легенда
Вы разрабатываете БД для ветеринарной клиники. Система должна хранить информацию о владельцах животных, их питомцах и записях на прием.

*   **`Owners` (Владельцы):** информация о клиентах клиники.
*   **`Pets` (Питомцы):** информация о животных, каждый питомец принадлежит одному владельцу.
*   **`Appointments` (Приемы):** запись о визите, связывающая питомца с датой приема и причиной обращения.

---
### Задание 1: Проектирование и реализация (10 баллов)
1.  **Создайте ER-диаграмму** для таблиц `Owners`, `Pets`, `Appointments`. Определите атрибуты, типы данных, ПК и ВК. Обратите внимание на связь `Owners` и `Pets`.
2.  **Напишите SQL-скрипт (`CREATE TABLE`)** для создания таблиц. Используйте `PRIMARY KEY`, `FOREIGN KEY` (с `ON DELETE CASCADE` для питомцев при удалении владельца), `NOT NULL`.
3.  **Письменно обоснуйте**, почему ваша схема находится в **третьей нормальной форме (3NF)**.

---
### Задание 2: Работа с данными и сложные запросы (10 баллов)
1.  Наполните таблицы данными (3 владельца, 5 питомцев, 15 записей на прием).
2.  **Напишите SQL-запросы:**
    *   **Простой `SELECT`:** Найти всех питомцев определенного вида (например, 'Собака').
    *   **`UPDATE`:** Перенести запись на прием на другую дату.
    *   **`SELECT` с `INNER JOIN`:** Показать всех питомцев, принадлежащих "Иванову И.И.", и их клички.
    *   **`SELECT` с `LEFT JOIN`:** Вывести список **всех** питомцев и количество их визитов в клинику.
    *   **`SELECT` с `GROUP BY` и `HAVING`:** Найти владельцев, у которых более одного питомца.
    *   **Сложный запрос:** Найти кличку самого старого питомца в клинике (по дате рождения).

---
### Задание 3: Оптимизация и анализ схемы (10 баллов)
1.  **Анализ запроса:** Выполните `EXPLAIN` для запроса поиска владельца по части фамилии (`... WHERE last_name LIKE '%ов'`). Объясните его неэффективность.
2.  **Создание индекса:** Создайте индекс для поля `species` (вид) в таблице `Pets` для ускорения поиска. Напишите команду `CREATE INDEX`.
3.  **Реверс-инжиниринг:** Сгенерируйте схему вашей БД с помощью DBeaver или аналога.
4.  **Сравнение:** Сравните сгенерированную схему с вашей исходной ER-диаграммой и опишите различия.

***

