# Вариант 7: Музыкальный стриминговый сервис

### Легенда
Вы разрабатываете БД для музыкального сервиса. Система должна хранить информацию об исполнителях, их альбомах и треках в этих альбомах.

*   **`Artists` (Исполнители):** информация об исполнителях.
*   **`Albums` (Альбомы):** информация об альбомах, каждый альбом принадлежит одному исполнителю.
*   **`Tracks` (Треки):** информация о треках, каждый трек принадлежит одному альбому.

---
### Задание 1: Проектирование и реализация (10 баллов)
1.  **Создайте ER-диаграмму** для таблиц `Artists`, `Albums`, `Tracks`. Определите атрибуты, типы данных, ПК и ВК для иерархической связи.
2.  **Напишите SQL-скрипт (`CREATE TABLE`)** для создания таблиц. Используйте `PRIMARY KEY`, `FOREIGN KEY` (с `ON DELETE CASCADE`), `NOT NULL`.
3.  **Письменно обоснуйте**, почему ваша схема находится в **третьей нормальной форме (3NF)**.

---
### Задание 2: Работа с данными и сложные запросы (10 баллов)
1.  Наполните таблицы данными (3 исполнителя, 5 альбомов, 20 треков).
2.  **Напишите SQL-запросы:**
    *   **Простой `SELECT`:** Найти все альбомы, выпущенные в определенном году.
    *   **`UPDATE`:** Изменить название одного из треков.
    *   **`SELECT` с `INNER JOIN`:** Показать все треки из альбома "The Dark Side of the Moon".
    *   **`SELECT` с двойным `INNER JOIN`:** Вывести список всех треков (название трека, название альбома) исполнителя "Queen".
    *   **`SELECT` с `GROUP BY`:** Посчитать количество треков в каждом альбоме.
    *   **Сложный запрос:** Найти исполнителя с наибольшим количеством альбомов в базе данных.

---
### Задание 3: Оптимизация и анализ схемы (10 баллов)
1.  **Анализ запроса:** Выполните `EXPLAIN` для запроса поиска исполнителя по части имени (`... WHERE artist_name LIKE '%Rock%'`). Объясните его неэффективность.
2.  **Создание индекса:** Создайте индекс для поля `release_year` в таблице `Albums`. Напишите команду `CREATE INDEX`.
3.  **Реверс-инжиниринг:** Сгенерируйте схему вашей БД с помощью DBeaver или аналога.
4.  **Сравнение:** Сравните сгенерированную схему с вашей исходной ER-диаграммой и опишите различия.

***
