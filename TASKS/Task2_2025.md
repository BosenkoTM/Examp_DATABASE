# Вариант 2. Фитнес-клуб

### Легенда
Вы разрабатываете БД для фитнес-клуба. Система должна отслеживать клиентов, тренеров и проведенные персональные тренировки.

*   **`Clients` (Клиенты):** информация о клиентах клуба.
*   **`Trainers` (Тренеры):** информация о тренерах.
*   **`Workouts` (Тренировки):** связующая таблица, фиксирующая факт проведения тренировки тренером для клиента в определенное время.

---
### Задание 1. Проектирование и реализация (10 баллов)
1.  **Создайте ER-диаграмму** для таблиц `Clients`, `Trainers`, `Workouts`. Определите атрибуты, типы данных, первичные и внешние ключи.
2.  **Напишите SQL-скрипт (`CREATE TABLE`)** для создания этих таблиц. Включите ограничения `PRIMARY KEY`, `FOREIGN KEY`, `NOT NULL` и `CHECK` (например, длительность тренировки должна быть больше 0).
3.  **Письменно обоснуйте**, почему ваша схема находится в **третьей нормальной форме (3NF)**.

---
### Задание 2. Работа с данными и сложные запросы (10 баллов)
1.  Наполните таблицы тестовыми данными (3 тренера, 5 клиентов, 15 тренировок).
2.  **Напишите SQL-запросы:**
    *   **Простой `SELECT`:** Вывести всех тренеров со специализацией "Йога".
    *   **`UPDATE`:** Изменить стоимость одной из проведенных тренировок.
    *   **`SELECT` с `INNER JOIN`:** Вывести список всех тренировок (дата, имя клиента, имя тренера), проведенных после определенной даты.
    *   **`SELECT` с `LEFT JOIN`:** Вывести список **всех** клиентов и количество персональных тренировок, которые каждый из них посетил.
    *   **`SELECT` с `GROUP BY` и `HAVING`:** Найти тренеров, которые провели более 5 тренировок за последний месяц.
    *   **Сложный запрос:** Определить самого популярного тренера (по количеству проведенных тренировок).

---
### Задание 3. Оптимизация и анализ схемы (10 баллов)
1.  **Анализ запроса:** Выполните `EXPLAIN` для запроса поиска клиента по части номера телефона (например, `... WHERE phone LIKE '%1234'`). Объясните, почему он неэффективен.
2.  **Создание индекса:** Создайте индекс для поля `specialization` в таблице `Trainers` для ускорения поиска по специализации. Напишите команду `CREATE INDEX`.
3.  **Реверс-инжиниринг:** Сгенерируйте схему вашей БД с помощью DBeaver или аналога.
4.  **Сравнение:** Сравните сгенерированную схему с вашей исходной ER-диаграммой и опишите различия.

***
